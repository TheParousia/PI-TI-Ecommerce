{% extends "master.html" %}

{% block content %}
    <div class="container">
        <h1>Atualizar Cor do Produto</h1>

        <div class="color-preview" id="colorDisplay" style="height: 100px; border: 1px solid #000;"></div>

        <form action="{% url 'cor_atualizada' %}" method="POST" onsubmit="return validateForm()">
            {% csrf_token %}
            <div class="color-picker mb-3">
                <select id="corProduto" name="cor" onchange="modificarCor()">
                    {% for cor in cores %}
                        <option value="{{ cor.codigo_hex }}">{{ cor.nome }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="d-flex">
                <button type="button" class="btn btn-dark me-2" onclick="document.getElementById('corProduto').click();">Escolher Cor</button>
                <button type="submit" class="btn btn-dark me-2">Atualizar Cor</button>
                <a href="{% url 'cadastrar_cor' %}" class="btn btn-dark">Cancelar</a>
            </div>
        </form>
    </div>

    <script>
        function modificarCor() {
            var novaCor = document.getElementById('corProduto').value;
            document.getElementById('colorDisplay').style.backgroundColor = novaCor;
        }

        function validateForm() {
            var corSelecionada = document.getElementById('corProduto').value;
            if (!corSelecionada) {
                alert("Por favor, escolha uma cor para o produto.");
                return false;
            }
            return true;
        }
    </script>
{% endblock %}
